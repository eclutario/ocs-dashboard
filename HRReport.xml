
<?xml version="1.0" encoding="UTF-8"?>
<Module>
  <ModulePrefs
      title="__MSG_default_title__"
      author="Victor Alarcon"
      author_affiliation="IRRI"
      author_email="v.alarcon@irri.org"
      description="__MSG_description__"
      screenshot=""
      thumbnail=""
      height="350">
    <Require feature="settitle" />
    <Require feature="idi" />
    <Require feature="locked-domain" />
    <Require feature="setprefs" />
  </ModulePrefs>

  <UserPref name="_table_query_url" display_name="__MSG_tablequeryurl__" required="true" />
  <UserPref name="title" display_name="__MSG_title__" required="false" />
  <UserPref name="initialstate" display_name="__MSG_initialstate__" required="false" />
  <UserPref name="_table_query_refresh_interval" display_name="__MSG_tablequeryrefreshinterval__" default_value="300" datatype="enum" required="false">
    <EnumValue value="0" display_value="__MSG_never__" />
    <EnumValue value="60" display_value="1" />
    <EnumValue value="300" display_value="5" />
    <EnumValue value="1800" display_value="30" />
  </UserPref>

  <Content type="html"><![CDATA[
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	<link rel="stylesheet" href="https://code.jquery.com/ui/1.11.1/themes/redmond/jquery-ui.css">
	<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
	<script src="https://code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
	<script type="text/javascript"  src="https://sites.google.com/a/irri.org/ocs-dashboard-dev/DashboardWrapper.js"></script>
	<style type='text/css'>
		.infowindow {
			 font-family: sans-serif;
			 font-size: 0.6em;
		}
		.mctable {
			 font-family: sans-serif;
			 font-size: 0.7em;
			 border: 1px solid Gray;
		}
		.mctableheader {
			 font-family: sans-serif;
			 font-size: 0.6em;
			 background: linear-gradient(to bottom, rgb(255, 255, 255) 0%, rgb(249, 250, 253) 30%, rgb(238, 242, 247) 60%, rgb(228, 233, 244) 100%) repeat scroll 0 0 transparent;
			 border: 1px solid Gray;
		}
	</style>
	<script type="text/javascript">
		google.load('visualization', '1.1', { packages: ['controls', 'corechart','map'] });
	</script>
	<script>
		$(document).ready(function() {
			$('#AgrReport').css('font-size', '.8em');
			$( "#tabs" ).tabs({
				collapsible: true,
				activate: 	function (event, ui) {
								if(ui.newTab.index()==1) {
									$("#filters").hide(1000);
									$("#dashboardAEC").hide(1000);
								}
								else {
									$("#filters").show(1000);		
									$("#dashboardAEC").show(1000);									
								}
							}
				});
		
		});
	</script>
    <script type="text/javascript">
		var motionChart;
		var dataSourceUrl = 'https://spreadsheets.google.com/tq?key=1Ha5wjKJxEfTxasTkDsrZ1EhmIMAD07wWMDdO7e86CYQ&gid=1936256765';

		
		google.setOnLoadCallback(function() { InitGraphs(); });
	 

			
		function InitGraphs()
		{
			var motionQuery;
			motionQuery && motionQuery.abort();		
			motionQuery = new google.visualization.Query(dataSourceUrl + "&tq=Select A,G where A <> ''");
																			//	 
			var motionChart = new google.visualization.Map(document.getElementById('MapNationality'));
			var mapQueryWrapper =  new DashboardWrapper(motionQuery, motionChart, {showTip: true}, null);
			mapQueryWrapper.sendAndDraw();
					google.visualization.drawChart({
					"containerId": "chart2",
					"dataSourceUrl": 'https://docs.google.com/a/irri.org/spreadsheet/tq?range=A1:C7&key=1Ha5wjKJxEfTxasTkDsrZ1EhmIMAD07wWMDdO7e86CYQ&gid=1252886937&headers=-1',
					"chartType": "BarChart",
					"options": {
					  "title":"IRRI Gender Demographics",
					  "vAxis": {"title": "Age Group"},
					  "hAxis": {"title": "Staff By Gender"},
					  "isStacked": true,
						width: 1200,
						height: 600,   
					}
					
				  });	

		}


	</script>
</head>


<br />
	<div id="AgrReport" style='font-size: 0.85em;'> 
		<div id="dashboard">
					<table width='100%'>
						<tr>
							<td style='width: 10%; font-size: smaller;' valign="top">
								<div id="filters" style='font-size: 0.85em;'>
									<div  id="nationalityFilter" ></div>
									<div id="divisionFilter" ></div>
									<div id="ouFilter" ></div>
								</div>
							</td>
							<td style='width: 90%; font-size: smaller;' valign="top">
								<div id="tabs">
									<ul>
										<li><a href="#tabs-1">Map</a></li>
										<li><a href="#tabs-2">Gender Chart</a></li>

									</ul>
									<div id="tabs-1">

										<div id="MapNationality" ></div>								
									</div>
									<div id="tabs-2">
										<div id="chart2"></div>
									</div>								
							</td>
						</tr>

					</table>
				</div>
				<p>&nbsp;</p>


		
		</div>
		<div id="dialog" style='font-size: 0.85em;'>
			
		</div>	
	</div>

   
   ]]>
  </Content>
</Module>
